{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucat\\\\Documents\\\\Cours\\\\UQAC\\\\Architecture\\\\messagerie\\\\src\\\\Components\\\\Message\\\\MessageForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ClientForm = _ref => {\n  _s();\n  let {\n    messageFormNeedUpdate\n  } = _ref;\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const [name, setName] = useState(\"\");\n  const [tipsRate, setTipsRate] = useState(15);\n  const [submitting, setSubmitting] = useState(false);\n  const onSubmit = data => {\n    setSubmitting(true);\n    setName(data.clientName);\n    setTipsRate(data.tipsRate);\n    messageFormNeedUpdate();\n  };\n  useEffect(() => {\n    if (submitting) {\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          clientName: name,\n          tipsRate: tipsRate\n        })\n      };\n      fetch('http://localhost:8081/addClient', requestOptions).then(() => {\n        setSubmitting(false);\n        setName(\"\");\n      });\n    }\n  }, [name, tipsRate, submitting]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(data => onSubmit(data)),\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Rentrez un message : \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ...register(\"content\"),\n        placeholder: \"Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Ajouter un client\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n_s(ClientForm, \"m/O3LMQyd9m49S9Ugef5+FK7U88=\", false, function () {\n  return [useForm];\n});\n_c = ClientForm;\nexport default ClientForm;\nvar _c;\n$RefreshReg$(_c, \"ClientForm\");","map":{"version":3,"names":["React","useEffect","useState","useForm","jsxDEV","_jsxDEV","ClientForm","_ref","_s","messageFormNeedUpdate","register","handleSubmit","name","setName","tipsRate","setTipsRate","submitting","setSubmitting","onSubmit","data","clientName","requestOptions","method","headers","body","JSON","stringify","fetch","then","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","type","_c","$RefreshReg$"],"sources":["C:/Users/lucat/Documents/Cours/UQAC/Architecture/messagerie/src/Components/Message/MessageForm.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {FieldValues, useForm} from \"react-hook-form\";\r\n\r\ninterface MessageFormProps {\r\n    messageFormNeedUpdate: () => void\r\n}\r\n\r\nconst ClientForm: React.FC<MessageFormProps> = ({messageFormNeedUpdate}: MessageFormProps) => {\r\n    const {register, handleSubmit} = useForm();\r\n    const [name, setName] = useState(\"\");\r\n    const [tipsRate, setTipsRate] = useState(15);\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    const onSubmit = (data: FieldValues) => {\r\n        setSubmitting(true);\r\n        setName(data.clientName);\r\n        setTipsRate(data.tipsRate)\r\n        messageFormNeedUpdate();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (submitting) {\r\n            const requestOptions = {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({clientName: name, tipsRate: tipsRate})\r\n            };\r\n            fetch('http://localhost:8081/addClient', requestOptions)\r\n                .then(() => {\r\n                    setSubmitting(false);\r\n                    setName(\"\");\r\n                });\r\n        }\r\n    }, [name, tipsRate, submitting]);\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit((data: FieldValues) => onSubmit(data))}>\r\n            <h4>Rentrez un message : </h4>\r\n            <div>\r\n                <input {...register(\"content\")} placeholder=\"Message\"/>\r\n                <button type=\"submit\">Ajouter un client</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nexport default ClientForm;"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,SAAqBC,OAAO,QAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAMrD,MAAMC,UAAsC,GAAGC,IAAA,IAA+C;EAAAC,EAAA;EAAA,IAA9C;IAACC;EAAuC,CAAC,GAAAF,IAAA;EACrF,MAAM;IAACG,QAAQ;IAAEC;EAAY,CAAC,GAAGR,OAAO,CAAC,CAAC;EAC1C,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMgB,QAAQ,GAAIC,IAAiB,IAAK;IACpCF,aAAa,CAAC,IAAI,CAAC;IACnBJ,OAAO,CAACM,IAAI,CAACC,UAAU,CAAC;IACxBL,WAAW,CAACI,IAAI,CAACL,QAAQ,CAAC;IAC1BL,qBAAqB,CAAC,CAAC;EAC3B,CAAC;EAEDR,SAAS,CAAC,MAAM;IACZ,IAAIe,UAAU,EAAE;MACZ,MAAMK,cAAc,GAAG;QACnBC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC;QAC7CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAACN,UAAU,EAAER,IAAI;UAAEE,QAAQ,EAAEA;QAAQ,CAAC;MAC/D,CAAC;MACDa,KAAK,CAAC,iCAAiC,EAAEN,cAAc,CAAC,CACnDO,IAAI,CAAC,MAAM;QACRX,aAAa,CAAC,KAAK,CAAC;QACpBJ,OAAO,CAAC,EAAE,CAAC;MACf,CAAC,CAAC;IACV;EACJ,CAAC,EAAE,CAACD,IAAI,EAAEE,QAAQ,EAAEE,UAAU,CAAC,CAAC;EAEhC,oBACIX,OAAA;IAAMa,QAAQ,EAAEP,YAAY,CAAEQ,IAAiB,IAAKD,QAAQ,CAACC,IAAI,CAAC,CAAE;IAAAU,QAAA,gBAChExB,OAAA;MAAAwB,QAAA,EAAI;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC9B5B,OAAA;MAAAwB,QAAA,gBACIxB,OAAA;QAAA,GAAWK,QAAQ,CAAC,SAAS,CAAC;QAAEwB,WAAW,EAAC;MAAS;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eACvD5B,OAAA;QAAQ8B,IAAI,EAAC,QAAQ;QAAAN,QAAA,EAAC;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEf,CAAC;AAAAzB,EAAA,CArCKF,UAAsC;EAAA,QACPH,OAAO;AAAA;AAAAiC,EAAA,GADtC9B,UAAsC;AAsC5C,eAAeA,UAAU;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}